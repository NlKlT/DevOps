## Part 1. Готовый докер

- Взять официальный докер образ с nginx и выкачать его при помощи `docker pull`
- Проверить наличие докер образа через `docker images`

![](/Docker/src/img/d1.png)

- Запустить докер образ через `docker run -d [image_id|repository]`
- Проверить, что образ запустился через `docker ps`
- Посмотреть информацию о контейнере через docker inspect `[container_id|container_name]`

![](/Docker/src/img/d2.png)

- По выводу команды определить и поместить в отчёт размер контейнера, список замапленных портов и ip контейнера

![](/Docker/src/img/d3.png)

- Остановить докер образ через `docker stop [container_id|container_name]`
- Проверить, что образ остановился через `docker ps`

![](/Docker/src/img/d4.png)

- Запустить докер с портами 80 и 443 в контейнере, замапленными на такие же порты на локальной машине, через команду `run`

![](/Docker/src/img/d5.png)

- Проверить, что в браузере по адресу localhost:80 доступна стартовая страница nginx

![](/Docker/src/img/d6.png)

- Перезапустить докер контейнер через `docker restart [container_id|container_name]`
- Проверить любым способом, что контейнер запустился

![](/Docker/src/img/d7.png)

## Part 2. Операции с контейнером

Докер образ и контейнер готовы. Теперь можно покопаться в конфигурации nginx и отобразить статус страницы.

- Прочитать конфигурационный файл nginx.conf внутри докер контейнера через команду `exec`

![](/Docker/src/img/d8.png)

- Создать на локальной машине файл nginx.conf
- Настроить в нем по пути /status отдачу страницы статуса сервера nginx

![](/Docker/src/img/d9.png)

- Скопировать созданный файл nginx.conf внутрь докер образа через команду `docker cp`
- Перезапустить nginx внутри докер образа через команду `exec`

![](/Docker/src/img/d10.png)

- Проверить, что по адресу localhost:80/status отдается страничка со статусом сервера nginx

![](/Docker/src/img/d11.png)

- Экспортировать контейнер в файл container.tar через команду export
- Остановить контейнер
- Удалить образ через `docker rmi [image_id|repository]`, не удаляя перед этим контейнеры
- Удалить остановленный контейнер

![](/Docker/src/img/d12.png)
![](/Docker/src/img/d13.png)

- Импортировать контейнер обратно через команду import
- Запустить импортированный контейнер
- Проверить, что по адресу localhost:80/status отдается страничка со статусом сервера nginx

![](/Docker/src/img/d14.png)

- `Active connections` – Количество всех открытых соединений. Это не количество пользователей, которые подключились к сайту, один пользователь для одного просмотра страницы может открыть множество одновременных соединений к серверу.
- `Server accepts handled requests` – Этот параметр показывает, три значения:
- Первый — это количество всех принятых соединений.
- Второй — это количество всех прерванных соединений. Обычно первые 2 значения одинаковы.
- Третий — это количество обрабатывающихся запросов (как правило, данный параметр больше чем второе значение).
- `Reading` – Количество считанных заголовков запроса в nginx.
- `Writing` – Nginx читает тело запроса, обрабатывает запрос, или пишет ответ на клиента.
- `Waiting` – Keep-Alive соединения, на самом деле активно – (чтение + запись). Эта величина зависит от keepalive-timeout. Это значение можно проигнорировать.