# Linux

## Part 1. Установка ОС

`-` *Я использовал программу ==VMWare==, поскольку на Macbook с процессорами M-серии не поддерживается программыа VirtualBox*

==Задание==

![linux_1](/Linux/src/img/linux_1.png)
\> *результат выполнения соманды* `cat /etc/issue.`

## Part 2. Создание пользователя

==Задание==

`-` Первый шаг - создание пользователя:

![](/Linux/src/img/linux_2_1.png)

`-` Второй шаг - добавление пользователя в группу `adm`:

![](/Linux/src/img/linux_2_2.png) \
\> *флаг `-aG` позволяет добавить пользователя в новую группу, не удаляя из других.*

![](/Linux/src/img/linux_2_3.png) \
\> *проверяем, что новый пользователь добавлен в группу `adm`.*

`-` Третий шаг - проверяем вывод команды `cat /etc/passwd`
![](/Linux/src/img//linux_2_4.png) \
\> *последняя строчка содержит информацию о новом пользователе*

## Part 3. Настройка сети ОС

==Задание==

`-` Для начала меняем имя нашей linux машины
![](/Linux/src/img/linux_3_1.png)

`-` Устанавливаем временную зону с помощью команды `timedatectl`
![](/Linux/src/img/linux_3_2.png)

`-`Устанавливаем набор сетевых инструментов
![](/Linux/src/img/linux_3_3.png)

`-` Выводим названия сетевых интерфейсов
![](/Linux/src/img/linux_3_4.png)

\> *Интерфейс `lo` (Loopback) является специальным сетевым интерфейсом на компьютере, который предназначен для обратной связи с самим собой. Он является виртуальным интерфейсом и представляет собой логический сетевой интерфейс, который не связан с конкретным физическим устройством.* 

`-`Получаю свой ip адрес от DHCP сервера
![](/Linux/src/img/linux_3_5.png)\
\>`DHCP - Dynamic Host Configuration Protocol`

`-`Определяю внешний ip адрес
![](/Linux/src/img/linux_3_6.png)

`-`Определяю внутренний ip адрес шлюза, ip адрес по умолчанию
![](/Linux/src/img/linux_3_7.png)

`-`Изменяю файл конфигурации сети `/etc/netplan/*.yaml`
![](/Linux/src/img/linux_3_8.png)

`-`Применияю изменения и перезапускаю систему
![](/Linux/src/img/linux_3_9.png)

`-`Проверяю что адреса соответсвют тем, которые я задал
![](/Linux/src/img/linux_3_10.png)

`-`Успешно пингую хост `1.1.1.1`
![](/Linux/src/img/linux_3_11.png)

`-`Успешно пингую хост `8.8.8.8`
![](/Linux/src/img/linux_3_12.png)

## Part 4. Обновление ОС

`-`Ввожу команду для обновления
![](/Linux/src/img/linux_4_1.png)

`-`Повторно ввожу команду, чтобы убедиться, что все обновления установлены
![](/Linux/src/img/linux_4_2.png)

## Part 5. Использование команды **sudo**

`-`**sudo** - позволяет временно поднимать привилегии и выполнять задачи администрирования системы с максимальными правами

`-`Добавляю пользователя в группу с привлегиями `sudo`, переключаюсь на него и меняю название **hostname**
![](/Linux/src/img/linux_5_1.png)

## Part 6. Установка и настройка службы времени

`-`Вывожу команду с корректным временем
![](/Linux/src/img/linux_6_1.png)

`-`Скриншот с моей текущей датой и временем
![](/Linux/src/img/linux_6_2.png)

## Part 7. Установка и использование текстовых редакторов

`-`**VIM** Для сохранения и выхода нажал ESC и прописал :wq
![](/Linux/src/img/linux_7_1.png)

`-`**NANO** Для сохранения нажал ^O, подтвердил имя файла и вышел на ^X
![](/Linux/src/img/linux_7_2.png)

`-`**JOE** Для сохранения нажал ^KX и подтвердил имя файла
![](/Linux/src/img/linux_7_3.png)

`-`**VIM** Для выхода без сохранения ESC -> :q! -> ENTER
![](/Linux/src/img/linux_7_4.png)

`-`**NANO** Для выхода без сохранения ^X -> N
![](/Linux/src/img/linux_7_5.png)

`-`**JOE** Для выхода без сохранения ^C -> y
![](/Linux/src/img/linux_7_6.png)

`-`**VIM** Для поиска: /что_ищем
![](/Linux/src/img/linux_7_7.png)

`-`**VIM** Для замены: :s/что_заменить/чем
![](/Linux/src/img/linux_7_8.png)

`-`**NANO** Для поиска: ^W -> что ищем
![](/Linux/src/img/linux_7_9.png)

`-`**NANO** Для замены: ^\ -> что заменить -> чем -> Y
![](/Linux/src/img/linux_7_10.png)

`-`**JOE** Для поиска: ^K F -> что ищем -> I
![](/Linux/src/img/linux_7_11.png)

`-`**JOE** Для замены: ^K F -> что заменить -> R -> чем -> Y
![](/Linux/src/img/linux_7_12.png)

## Part 8. Установка и базовая настройка сервиса SSHD

`-`Установил openssh-server\
`-`Отредактировал файл конфигурации `/etc/ssh/sshd_config`\
`-`Выполнил `sudo systemctl start sshd`\
`-`Выполнил `sudo systemctl enable ssh`\
`-`Отобразил наличие процесса
![](/Linux/src/img/linux_8_1.png)
\> команда **ps** выводит сведения о процессах в системе\
\> флаг **-e** позволяет выбрать все процессы\
\> **| grep sshd** - поиск по выводу через пайп

`-`Выполняю команду `reboot`\
`-`Выполняю команду `netstat -tan`
![](/Linux/src/img/linux_8_2.png)
\> **-tan**:\
\> **-a** - Показывать состояние всех сокетов; обычно сокеты, используемые серверными процессами, не показываются.\
\> **-n** - Показывать сетевые адреса как числа. netstat обычно показывает адреса как символы.\
\> **-t** - Отображать TCP подключения.\
#### Значения столбцов
\> Proto - Содержит тип протокола\
\> Recv-Q - Счётчик байтов не скопированных программой пользователя из этого сокета.\
\> Send-Q - Счётчик байтов, не подтверждённых удалённым узлом.\
\> Local Address - Адрес и номер порта локального конца сокета.\
\> Foreign Address - Адрес и номер порта удалённого конца сокета.\
\> State - Состояние сокета.\
\> LISTEN Сокет ожидает входящих подключений.\
\> SYN_SENT Сокет, находящийся в режиме активной попытки установки подключения.\
\> 0.0.0.0 - это немаршрутизируемый адрес IPv4, который используется в качестве адреса по умолчанию или адреса-заполнителя.

## Part 9. Установка и использование утилит top, htop

`-`Uptime: 2 min

`-`1 user

`-`Load average: 0.14, 0.27, 0.12

`-`Tasks: 225 total

`-`%Cpu(s): 0.0 us, 0.2 sy, 0.0 ni, 99.8 id, 0.0 wa, 0.0 hi, 0.0 si, 0.0 st

`-`MiB Mem: 3919.5 total, 3510.3 free, 141.0 used, 267.7 buff/cache

`-`PID 1311

`-`PID 1311

`-` **htop сортировка по PID**
![](/Linux/src/img/linux_8_3.png)

`-` **htop сортировка по PERCENT_CPU**
![](/Linux/src/img/linux_8_4.png)

`-` **htop сортировка по PERCENT_MEM**
![](/Linux/src/img/linux_8_5.png)

`-` **htop сортировка по TIME**
![](/Linux/src/img/linux_8_6.png)

`-` **htop фильтр по процессу sshd**
![](/Linux/src/img/linux_8_7.png)

`-` **htop поиск процесса syslog**
![](/Linux/src/img/linux_8_8.png)

`-` **htop с добавленным выводом hostname, clock и uptime**
![](/Linux/src/img/linux_8_9.png)

## Part 10. Использование утилиты fdisc

`-`Disk /dev/nvme0n1: 20 GiB 21474836480 bytes, 41943040 sectors
![](/Linux/src/img/linux_9_1.png)

## Part 11. Использование утилиты df

`-` Вывод команды `df`
![](/Linux/src/img/linux_11_1.png)
\>bytes

`-` Вывод команды `df -Th`
![](/Linux/src/img/linux_11_2.png)
\>ext4

## Part 12. Использование утилиты du

`-` Вывод команды `du`
![](/Linux/src/img/linux_12_1.png)

`-` **/home**
![](/Linux/src/img/linux_12_2.png)

`-` **/var**
![](/Linux/src/img/linux_12_3.png)

`-` **/var/log**
![](/Linux/src/img/linux_12_4.png)

`-` **/var/log/***
![](/Linux/src/img/linux_12_5.png)

## Part 13. Установка и использование утилиты ncdu

`-` Установка: `sudo apt install ncdu`

`-` **/home**
![](/Linux/src/img/linux_13_1.png)

`-` **/var**
![](/Linux/src/img/linux_13_2.png)

`-` **/var/log**
![](/Linux/src/img/linux_13_3.png)

## Part 14. Работа с системными журналами

`-` Последняя авторизация
![](/Linux/src/img/linux_14_1.png)

`-` Перезапуск OpenSSH Server
![](/Linux/src/img/linux_14_2.png)

## Part 15. Использование планировщика задач CRON

`-` Создание задачи в CRON
![](/Linux/src/img/linux_15_1.png)

`-` Проверяем uptime каждые две минуты
![](/Linux/src/img/linux_15_2.png)

`-` Вывожу список всех задач CRON
![](/Linux/src/img/linux_15_3.png)

`-` Удаляю все задачи и проверяю список
![](/Linux/src/img/linux_15_4.png)
